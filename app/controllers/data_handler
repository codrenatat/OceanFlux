const fs = require("fs");
const path = require('node:path');

const productsDataPath = path.join(__dirname, '../data/products.json');

function getHotels() {
  const hotelsData = fs.readFileSync(productsDataPath, 'utf-8');
  const hotels = JSON.parse(hotelsData);
  return hotels;
}

function createHotel(hotel) {
  try {
    console.log('Hotel Creado');
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);
    hotels.hotels.push(hotel);
    fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
    console.log('Hotel added');
  } catch (error) {
    console.error('Error al crear el hotel:', error);
  }
}

function updateHotel(id, updatedHotel) {
  try {
    console.log('Hotel created');
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);

    const hotelToUpdate = hotels.hotels.find((hotel) => hotel._uuid === id);

    if (hotelToUpdate) {
      // Modifica las propiedades del hotel según tus necesidades
      // ...

      fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
      console.log('Hotel updated');
    }
  } catch (error) {
    console.error('Error al actualizar el hotel:', error);
  }
}

function findHotel(query) {
  // Implementa la lógica de búsqueda de hoteles según tus necesidades
  // ...
}const fs = require("fs");
const path = require("node:path");

const productsDataPath = path.join(__dirname, '../data/products.json');
const viajesDataPath = path.join(__dirname, '../data/viajes.json');

function getHotels() {
  const hotelsData = fs.readFileSync(productsDataPath, 'utf-8');
  const hotels = JSON.parse(hotelsData);
  return hotels;
}

function createHotel(hotel) {
  try {
    console.log('Hotel creado');
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);
    hotels.hotels.push(hotel);
    fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
    console.log('Hotel agregado');
  } catch (error) {
    console.error('Error al crear el hotel:', error);
  }
}

function updateHotel(id, updatedHotel) {
  try {
    console.log('Hotel actualizado');
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);

    const hotelToUpdate = hotels.hotels.find((hotel) => hotel._uuid === id);

    if (hotelToUpdate) {
      // Modifica las propiedades del hotel según tus necesidades
      // ...

      fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
      console.log('Hotel actualizado');
    }
  } catch (error) {
    console.error('Error al actualizar el hotel:', error);
  }
}

function findHotel(query) {
  // Implementa la lógica de búsqueda de hoteles según tus necesidades
  // ...
}

function deleteHotel(id) {
  try {
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);

    const index = hotels.hotels.findIndex((hotel) => hotel._uuid === id);

    if (index !== -1) {
      hotels.hotels.splice(index, 1);
      fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
      console.log('Hotel eliminado');
    }
  } catch (error) {
    console.error('Error al eliminar el hotel:', error);
  }
}

function findHotelById(id) {
  // Implementa la lógica para encontrar un hotel por su ID
  // ...
}

// Operaciones relacionadas con viajes
function getViajes() {
  const viajesData = fs.readFileSync(viajesDataPath, 'utf-8');
  const viajes = JSON.parse(viajesData);
  return viajes;
}

function createViaje(viaje) {
  try {
    console.log('Viaje creado');
    const viajesData = fs.readFileSync(viajesDataPath, 'utf8');
    const viajes = JSON.parse(viajesData);
    viajes.viajes.push(viaje);
    fs.writeFileSync(viajesDataPath, JSON.stringify(viajes, null, 2));
    console.log('Viaje agregado');
  } catch (error) {
    console.error('Error al crear el viaje:', error);
  }
}

function updateViaje(id, updatedViaje) {
  try {
    console.log('Viaje actualizado');
    const viajesData = fs.readFileSync(viajesDataPath, 'utf8');
    const viajes = JSON.parse(viajesData);

    const viajeToUpdate = viajes.viajes.find((viaje) => viaje._uuid === id);

    if (viajeToUpdate) {
      // Modifica las propiedades del viaje según tus necesidades
      // ...

      fs.writeFileSync(viajesDataPath, JSON.stringify(viajes, null, 2));
      console.log('Viaje actualizado');
    }
  } catch (error) {
    console.error('Error al actualizar el viaje:', error);
  }
}

function findViaje(query) {
  // Implementa la lógica de búsqueda de viajes según tus necesidades
  // ...
}

function deleteViaje(id) {
  try {
    const viajesData = fs.readFileSync(viajesDataPath, 'utf8');
    const viajes = JSON.parse(viajesData);

    const index = viajes.viajes.findIndex((viaje) => viaje._uuid === id);

    if (index !== -1) {
      viajes.viajes.splice(index, 1);
      fs.writeFileSync(viajesDataPath, JSON.stringify(viajes, null, 2));
      console.log('Viaje eliminado');
    }
  } catch (error) {
    console.error('Error al eliminar el viaje:', error);
  }
}

function findViajeById(id) {
  // Implementa la lógica para encontrar un viaje por su ID
  // ...
}

module.exports = {
  getHotels,
  createHotel,
  updateHotel,
  deleteHotel,
  findHotel,
  findHotelById,
  getViajes,
  createViaje,
  updateViaje,
  deleteViaje,
  findViaje,
  findViajeById
};


function deleteHotel(id) {
  try {
    const hotelsData = fs.readFileSync(productsDataPath, 'utf8');
    const hotels = JSON.parse(hotelsData);

    const index = hotels.hotels.findIndex((hotel) => hotel._uuid === id);

    if (index !== -1) {
      hotels.hotels.splice(index, 1);
      fs.writeFileSync(productsDataPath, JSON.stringify(hotels, null, 2));
      console.log('Hotel deleted');
    }
  } catch (error) {
    console.error('Error al eliminar el hotel:', error);
  }
}

function findHotelById(id) {
  // Implementa la lógica para encontrar un hotel por su ID
  // ...
}

module.exports = { getHotels, createHotel, updateHotel, deleteHotel, findHotel, findHotelById };
